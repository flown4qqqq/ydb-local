# ALTER USER

Изменяет пароль пользователя.

Синтаксис:

```yql
ALTER USER user_name [ WITH ] option [ ... ]
```

* `user_name` — имя пользователя.
* `option` — опция команды:
  * `PASSWORD 'password'` — изменяет пароль на `password`.
  * `PASSWORD NULL` — устанавливает пустой пароль.
  * `NOLOGIN` - запрет на логин пользователя (блокировка пользователя).
  * `LOGIN` - разрешение на логин пользователя (разблокировка пользователя).
  * `HASH 'hash'` - создает пользователя, у которого хеш пароля будет равен `hash`; нельзя использовать одновременно с `PASSWORD`.

{% include [!](../../../_includes/do-not-create-users-in-ldap.md) %}

## Примечание

### Hash

В YDB хранится пароль пользователя в зашифрованном виде. Поэтому, чтобы была возможность восстановить пользователя при бэкапе базы данных, существует опция `HASH`, которая позволяет после создания пользователя, изменить его пароль, зная только хеш в формате JSON.

В опции `HASH` параметр 'hash' должен принимать JSON-объект, в котором есть ровно три поля:

* `hash` - значение самого хеша в формате base64;
* `salt` - соль, соответствующая хешу в формате base64;
* `type` - алгоритм, которым был зашифрован пароль; это значение должно быть всегда равно `argon2id`.


Пример:

```yql
ALTER USER user1 HASH '{
    "hash": "p4ffeMugohqyBwyckYCK1TjJfz3LIHbKiGL+t+oEhzw=",
    "salt": "U+tzBtgo06EBQCjlARA6Jg==",
    "type": "argon2id"
}'
```

### Login

Только для [локальных пользователей](../../../concepts/glossary.md#access-user).

При превышении ограничение на количество попыток авторизации пользователь получает временную блокировку. Чтобы снять блокировку досрочно, можно воспользоваться опцией `LOGIN`.

Пример:

```yql
ALTER USER user1 LOGIN
```

## Встроенные пользователи

{% include [!](../_includes/initial_groups_and_users.md) %}
